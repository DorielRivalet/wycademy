CREATE TABLE IF NOT EXISTS "quests" (
	"run_id" integer NOT NULL,
	"profile_id" uuid NOT NULL,
	"active_skill1_id" integer NOT NULL,
	"active_skill2_id" integer NOT NULL,
	"active_skill3_id" integer NOT NULL,
	"active_skill4_id" integer NOT NULL,
	"active_skill5_id" integer NOT NULL,
	"active_skill6_id" integer NOT NULL,
	"active_skill7_id" integer NOT NULL,
	"active_skill8_id" integer NOT NULL,
	"active_skill9_id" integer NOT NULL,
	"active_skill10_id" integer NOT NULL,
	"active_skill11_id" integer NOT NULL,
	"active_skill12_id" integer NOT NULL,
	"active_skill13_id" integer NOT NULL,
	"active_skill14_id" integer NOT NULL,
	"active_skill15_id" integer NOT NULL,
	"active_skill16_id" integer NOT NULL,
	"active_skill17_id" integer NOT NULL,
	"active_skill18_id" integer NOT NULL,
	"active_skill19_id" integer NOT NULL,
	"automatic_skill1_id" integer NOT NULL,
	"automatic_skill2_id" integer NOT NULL,
	"automatic_skill3_id" integer NOT NULL,
	"automatic_skill4_id" integer NOT NULL,
	"automatic_skill5_id" integer NOT NULL,
	"automatic_skill6_id" integer NOT NULL,
	"caravan_skill1_id" integer NOT NULL,
	"caravan_skill2_id" integer NOT NULL,
	"caravan_skill3_id" integer NOT NULL,
	"mhfdat_hash" text NOT NULL,
	"mhfemd_hash" text NOT NULL,
	"mhfsqd_hash" text NOT NULL,
	"mhfinf_hash" text NOT NULL,
	"mhfodll_hash" text NOT NULL,
	"mhfohddll_hash" text NOT NULL,
	"mhfexe_hash" text NOT NULL,
	"style_id" integer NOT NULL,
	"weapon_type_id" integer NOT NULL,
	"blademaster_weapon_id" integer,
	"gunner_weapon_id" integer,
	"weapon_slot1" text NOT NULL,
	"weapon_slot2" text NOT NULL,
	"weapon_slot3" text NOT NULL,
	"head_id" integer NOT NULL,
	"head_slot1_id" integer NOT NULL,
	"head_slot2_id" integer NOT NULL,
	"head_slot3_id" integer NOT NULL,
	"chest_id" integer NOT NULL,
	"chest_slot1_id" integer NOT NULL,
	"chest_slot2_id" integer NOT NULL,
	"chest_slot3_id" integer NOT NULL,
	"arms_id" integer NOT NULL,
	"arms_slot1_id" integer NOT NULL,
	"arms_slot2_id" integer NOT NULL,
	"arms_slot3_id" integer NOT NULL,
	"waist_id" integer NOT NULL,
	"waist_slot1_id" integer NOT NULL,
	"waist_slot2_id" integer NOT NULL,
	"waist_slot3_id" integer NOT NULL,
	"legs_id" integer NOT NULL,
	"legs_slot1_id" integer NOT NULL,
	"legs_slot2_id" integer NOT NULL,
	"legs_slot3_id" integer NOT NULL,
	"cuff1_id" integer NOT NULL,
	"cuff2_id" integer NOT NULL,
	"diva_skill_id" integer NOT NULL,
	"guild_food_id" integer NOT NULL,
	"poogie_item_id" integer NOT NULL,
	"player_inventory_dictionary" text NOT NULL,
	"player_ammo_pouch_dictionary" text NOT NULL,
	"partnya_bag_dictionary" text NOT NULL,
	"created_at" timestamp with time zone NOT NULL,
	"created_by" text NOT NULL,
	"quest_hash" text NOT NULL,
	"quest_id" integer NOT NULL,
	"time_left" integer NOT NULL,
	"final_time_value" integer NOT NULL,
	"final_time_display" text NOT NULL,
	"objetive_type_id" integer NOT NULL,
	"objective_quantity" integer NOT NULL,
	"star_grade" integer NOT NULL,
	"rank_name" text NOT NULL,
	"objective_name" text NOT NULL,
	"attack_buff_dictionary" text NOT NULL,
	"hit_count_dictionary" text NOT NULL,
	"hits_per_second_dictionary" text NOT NULL,
	"damage_dealt_dictionary" text NOT NULL,
	"damage_per_second_dictionary" text NOT NULL,
	"area_changes_dictionary" text NOT NULL,
	"carts_dictionary" text NOT NULL,
	"hits_taken_blocked_dictionary" text NOT NULL,
	"hits_taken_blocked_per_second_dictionary" text NOT NULL,
	"player_hp_dictionary" text NOT NULL,
	"player_stamina_dictionary" text NOT NULL,
	"keystrokes_dictionary" text NOT NULL,
	"mouse_input_dictionary" text NOT NULL,
	"gamepad_input_dictionary" text NOT NULL,
	"actions_per_minute_dictionary" text NOT NULL,
	"overlay_mode_dictionary" text NOT NULL,
	"actual_overlay_mode" text NOT NULL,
	"party_size" integer NOT NULL,
	"monster1_hp_dictionary" text NOT NULL,
	"monster2_hp_dictionary" text NOT NULL,
	"monster3_hp_dictionary" text NOT NULL,
	"monster4_hp_dictionary" text NOT NULL,
	"monster1_attack_multiplier_dictionary" text NOT NULL,
	"monster1_defense_rate_dictionary" text NOT NULL,
	"monster1_size_multiplier_dictionary" text NOT NULL,
	"monster1_poison_threshold_dictionary" text NOT NULL,
	"monster1_paralysis_threshold_dictionary" text NOT NULL,
	"monster1_sleep_threshold_dictionary" text NOT NULL,
	"monster1_blast_threshold_dictionary" text NOT NULL,
	"monster1_stun_threshold_dictionary" text NOT NULL,
	"monster1_part_threshold_dictionary" text NOT NULL,
	"monster2_part_threshold_dictionary" text NOT NULL,
	"is_high_grade_edition" boolean NOT NULL,
	"refresh_rate" integer NOT NULL,
	"party_size_dictonary" text NOT NULL,
	"active_feature" integer,
	"rights" integer,
	"diva_song_buff_on" boolean,
	"diva_prayer_gem_red_skill" integer,
	"diva_prayer_gem_red_level" integer,
	"diva_prayer_gem_yellow_skill" integer,
	"diva_prayer_gem_yellow_level" integer,
	"diva_prayer_gem_green_skill" integer,
	"diva_prayer_gem_green_level" integer,
	"diva_prayer_gem_blue_skill" integer,
	"diva_prayer_gem_blue_level" integer,
	"mhfdat_info" text,
	"mhfemd_info" text,
	"mhfodll_info" text,
	"mhfohddll_info" text,
	"guild_poogie1_skill" integer,
	"guild_poogie2_skill" integer,
	"guild_poogie3_skill" integer,
	"halk_on" boolean,
	"halk_pot_effect_on" boolean,
	"halk_fullness" integer,
	"halk_level" integer,
	"halk_intimacy" integer,
	"halk_health" integer,
	"halk_attack" integer,
	"halk_defense" integer,
	"halk_intellect" integer,
	"halk_skill1" integer,
	"halk_skill2" integer,
	"halk_skill3" integer,
	"halk_element_none" integer,
	"halk_fire" integer,
	"halk_water" integer,
	"halk_thunder" integer,
	"halk_ice" integer,
	"halk_dragon" integer,
	"halk_poison" integer,
	"halk_sleep" integer,
	"halk_paralysis" integer,
	"overlay_hash" text,
	"quest_variant1" integer,
	"quest_variant2" integer,
	"quest_variant3" integer,
	"quest_variant4" integer,
	"run_buffs" integer,
	"run_buffs_tag" text,
	"quest_toggle_mode" integer,
	"dual_swords_sharpens_dictionary" text NOT NULL,
	"road_dure_skill1_id" integer NOT NULL,
	"road_dure_skill1_level" integer NOT NULL,
	"road_dure_skill2_id" integer NOT NULL,
	"road_dure_skill2_level" integer NOT NULL,
	"road_dure_skill3_id" integer NOT NULL,
	"road_dure_skill3_level" integer NOT NULL,
	"road_dure_skill4_id" integer NOT NULL,
	"road_dure_skill4_level" integer NOT NULL,
	"road_dure_skill5_id" integer NOT NULL,
	"road_dure_skill5_level" integer NOT NULL,
	"road_dure_skill6_id" integer NOT NULL,
	"road_dure_skill6_level" integer NOT NULL,
	"road_dure_skill7_id" integer NOT NULL,
	"road_dure_skill7_level" integer NOT NULL,
	"road_dure_skill8_id" integer NOT NULL,
	"road_dure_skill8_level" integer NOT NULL,
	"road_dure_skill9_id" integer NOT NULL,
	"road_dure_skill9_level" integer NOT NULL,
	"road_dure_skill10_id" integer NOT NULL,
	"road_dure_skill10_level" integer NOT NULL,
	"road_dure_skill11_id" integer NOT NULL,
	"road_dure_skill11_level" integer NOT NULL,
	"road_dure_skill12_id" integer NOT NULL,
	"road_dure_skill12_level" integer NOT NULL,
	"road_dure_skill13_id" integer NOT NULL,
	"road_dure_skill13_level" integer NOT NULL,
	"road_dure_skill14_id" integer NOT NULL,
	"road_dure_skill14_level" integer NOT NULL,
	"road_dure_skill15_id" integer NOT NULL,
	"road_dure_skill15_level" integer NOT NULL,
	"road_dure_skill16_id" integer NOT NULL,
	"road_dure_skill16_level" integer NOT NULL,
	"style_rank_skill1_id" integer NOT NULL,
	"style_rank_skill2_id" integer NOT NULL,
	"zenith_skill1_id" integer NOT NULL,
	"zenith_skill2_id" integer NOT NULL,
	"zenith_skill3_id" integer NOT NULL,
	"zenith_skill4_id" integer NOT NULL,
	"zenith_skill5_id" integer NOT NULL,
	"zenith_skill6_id" integer NOT NULL,
	"zenith_skill7_id" integer NOT NULL,
	CONSTRAINT "quests_run_id_profile_id_pk" PRIMARY KEY("run_id","profile_id")
);
--> statement-breakpoint
ALTER TABLE "quests" ENABLE ROW LEVEL SECURITY;--> statement-breakpoint
ALTER TABLE "profiles" ALTER COLUMN "discord_avatar" DROP NOT NULL;--> statement-breakpoint
ALTER TABLE "profiles" ALTER COLUMN "updated_at" SET DATA TYPE timestamp with time zone;--> statement-breakpoint
ALTER TABLE "profiles" ALTER COLUMN "join_date" SET DATA TYPE timestamp with time zone;--> statement-breakpoint
ALTER TABLE "profiles" ALTER COLUMN "agreed_terms" SET DATA TYPE timestamp with time zone;--> statement-breakpoint
ALTER TABLE "profiles" ADD COLUMN "twitter_username_shown" boolean DEFAULT false NOT NULL;--> statement-breakpoint
ALTER TABLE "profiles" ADD COLUMN "username_set" boolean DEFAULT false NOT NULL;--> statement-breakpoint
DO $$ BEGIN
 ALTER TABLE "quests" ADD CONSTRAINT "quests_profile_id_profiles_id_fk" FOREIGN KEY ("profile_id") REFERENCES "public"."profiles"("id") ON DELETE no action ON UPDATE no action;
EXCEPTION
 WHEN duplicate_object THEN null;
END $$;
